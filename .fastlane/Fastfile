lane :tests do
    mac_tests
end

lane :ios_tests do
    run_tests(workspace: "ABit.xcworkspace",
              scheme: "ABit",
              devices: ["iPhone 12 mini"],
              catalyst_platform: "ios")
end

lane :mac_tests do
    match(type: "development",
          readonly: is_ci,
          git_basic_authorization: "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",
          )

    run_tests(workspace: "ABit.xcworkspace",
              scheme: "ABit",
              catalyst_platform: "macos")
end

after_all do |lane|
    print("Successfully ran (#{lane})!")
end

error do |lane, exception|
    print("Failed to complete (#{lane}) with exception (#{exception})!")
end
