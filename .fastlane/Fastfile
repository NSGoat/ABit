lane :tests do
    mac_tests
end

lane :ios_tests do
    run_tests(workspace: "ABit.xcworkspace",
              scheme: "ABit",
              devices: ["iPhone 12 mini"],
              catalyst_platform: "ios")
end

lane :mac_tests do
    scan(workspace: "ABit.xcworkspace", scheme: "ABit", catalyst_platform: "macos")
#     match(type: "development",
#           readonly: is_ci,
#           git_basic_authorization: "eW91cl9naXRodWJfdXNlcm5hbWU6eW91cl9wZXJzb25hbF9hY2Nlc3NfdG9rZW4=")

#     run_tests(workspace: "ABit.xcworkspace",
#               scheme: "ABit",
#               catalyst_platform: "macos")
end

after_all do |lane|
    print("Successfully ran (#{lane})!")
end

error do |lane, exception|
    print("Failed to complete (#{lane}) with exception (#{exception})!")
end
